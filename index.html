<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šè½¨éŸ³é¢‘æ’­æ”¾å™¨ï¼ˆå…±äº«è¿›åº¦æ¡ï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        body {
            background-color: #f0f2f5;
            color: #333;
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .master-controls {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .progress-section {
            margin-bottom: 15px;
        }
        .time-display {
            font-size: 14px;
            color: #7f8c8d;
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background-color: #3498db;
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s linear;
        }
        .tracks-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .track {
            background: white;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
        }
        .track-name {
            font-size: 16px;
            color: #2c3e50;
        }
        .track-buttons {
            display: flex;
            gap: 10px;
        }
        .btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        .btn-s {
            background-color: #3498db;
            color: white;
        }
        .btn-s:hover {
            background-color: #2980b9;
        }
        .btn-m {
            background-color: #ecf0f1;
            color: #7f8c8d;
        }
        .btn-m:hover, .btn-m.muted {
            background-color: #e74c3c;
            color: white;
        }
        audio {
            display: none;
        }
    </style>
</head>
<body>
    <h1>ğŸµ å¤šè½¨éŸ³é¢‘æ’­æ”¾å™¨</h1>

    <!-- æ€»æ§åˆ¶åŒºï¼ˆå…±äº«è¿›åº¦æ¡ï¼‰ -->
    <div class="master-controls">
        <div class="progress-section">
            <div class="time-display">
                <span id="currentTime">00:00</span>
                <span id="totalTime">00:00</span>
            </div>
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <!-- è½¨é“åˆ—è¡¨ -->
    <div class="tracks-container">
        <!-- è½¨é“1 -->
        <div class="track">
            <div class="track-name">è½¨é“ 1 - ä¸»æ—‹å¾‹</div>
            <div class="track-buttons">
                <button class="btn btn-s" onclick="playOnly('track1')">S</button>
                <button class="btn btn-m" onclick="toggleMute('track1')">M</button>
            </div>
            <audio id="track1" src="music/track1.mp3" type="audio/mpeg"></audio>
        </div>

        <!-- è½¨é“2 -->
        <div class="track">
            <div class="track-name">è½¨é“ 2 - é¼“ç‚¹</div>
            <div class="track-buttons">
                <button class="btn btn-s" onclick="playOnly('track2')">S</button>
                <button class="btn btn-m" onclick="toggleMute('track2')">M</button>
            </div>
            <audio id="track2" src="music/track2.mp3" type="audio/mpeg"></audio>
        </div>

        <!-- è½¨é“3 -->
        <div class="track">
            <div class="track-name">è½¨é“ 3 - è´æ–¯</div>
            <div class="track-buttons">
                <button class="btn btn-s" onclick="playOnly('track3')">S</button>
                <button class="btn btn-m" onclick="toggleMute('track3')">M</button>
            </div>
            <audio id="track3" src="music/track3.mp3" type="audio/mpeg"></audio>
        </div>
    </div>

    <script>
        // è·å–æ‰€æœ‰è½¨é“å…ƒç´ å’Œè¿›åº¦æ¡
        const tracks = {
            track1: document.getElementById('track1'),
            track2: document.getElementById('track2'),
            track3: document.getElementById('track3')
        };
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.getElementById('progressContainer');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        let activeTracks = []; // è®°å½•å½“å‰æ’­æ”¾çš„è½¨é“

        // åˆå§‹åŒ–ï¼šæ‰€æœ‰è½¨é“åŒæ­¥è¿›åº¦
        Object.values(tracks).forEach(track => {
            track.addEventListener('timeupdate', syncProgress);
            track.addEventListener('loadedmetadata', updateTotalTime);
        });

        // å•ç‹¬æ’­æ”¾æŒ‡å®šè½¨é“ï¼ˆæš‚åœå…¶ä»–æ‰€æœ‰è½¨é“ï¼‰
        function playOnly(trackId) {
            const targetTrack = tracks[trackId];
            // æš‚åœæ‰€æœ‰è½¨é“
            Object.values(tracks).forEach(track => track.pause());
            // æ’­æ”¾ç›®æ ‡è½¨é“
            targetTrack.play().catch(err => {
                alert('è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®å†æ’­æ”¾ï¼ˆæµè§ˆå™¨é™åˆ¶ï¼‰');
            });
            activeTracks = [trackId];
        }

        // åˆ‡æ¢è½¨é“é™éŸ³çŠ¶æ€
        function toggleMute(trackId) {
            const targetTrack = tracks[trackId];
            const muteBtn = document.querySelector(`[onclick="toggleMute('${trackId}')"]`);
            targetTrack.muted = !targetTrack.muted;
            muteBtn.classList.toggle('muted', targetTrack.muted);
        }

        // åŒæ­¥æ‰€æœ‰è½¨é“è¿›åº¦æ¡
        function syncProgress() {
            // ä»¥ç¬¬ä¸€ä¸ªæ’­æ”¾ä¸­çš„è½¨é“ä¸ºåŸºå‡†åŒæ­¥è¿›åº¦
            const playingTrack = Object.values(tracks).find(track => !track.paused);
            if (!playingTrack) return;

            const progress = (playingTrack.currentTime / playingTrack.duration) * 100;
            progressBar.style.width = `${progress}%`;
            currentTimeEl.textContent = formatTime(playingTrack.currentTime);
            
            // åŒæ­¥æ‰€æœ‰è½¨é“çš„å½“å‰æ—¶é—´ï¼ˆç¡®ä¿è¿›åº¦ä¸€è‡´ï¼‰
            Object.values(tracks).forEach(track => {
                if (track !== playingTrack && !track.paused) {
                    track.currentTime = playingTrack.currentTime;
                }
            });
        }

        // ç‚¹å‡»è¿›åº¦æ¡è·³è½¬ä½ç½®ï¼ˆæ‰€æœ‰è½¨é“åŒæ­¥ï¼‰
        progressContainer.addEventListener('click', (e) => {
            const clickRatio = e.offsetX / progressContainer.offsetWidth;
            Object.values(tracks).forEach(track => {
                if (track.duration) {
                    track.currentTime = track.duration * clickRatio;
                }
            });
        });

        // æ›´æ–°æ€»æ—¶é•¿ï¼ˆå–ç¬¬ä¸€ä¸ªåŠ è½½å®Œæˆçš„è½¨é“æ—¶é•¿ï¼‰
        function updateTotalTime() {
            const firstTrack = Object.values(tracks)[0];
            if (firstTrack.duration) {
                totalTimeEl.textContent = formatTime(firstTrack.duration);
            }
        }

        // æ—¶é—´æ ¼å¼åŒ–ï¼ˆ00:00ï¼‰
        function formatTime(seconds) {
            if (isNaN(seconds)) return '00:00';
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60);
            return `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>